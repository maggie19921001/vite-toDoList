import{r as k,o as i,c,F as b,q as x,g as r,a,b as p,s as $,h as T,t as E,v as V,d as v}from"./index-CHoBvRcG.js";const A={key:0,class:"no-item"},w={key:1,class:"todoList_item"},z={key:0,class:"todoList_label"},B={class:"items"},F=["onUpdate:modelValue","onClick"],L={class:"btns"},U={key:0},D=["onUpdate:modelValue","onChange"],N=["onClick"],M=["onClick"],S=["onClick"],h="https://todolist-api.hexschool.io",H={__name:"Completed",setup(q){const u=(()=>{const t=document.cookie.split(";");for(let o of t){const[e,_]=o.trim().split("=");if(e==="loginToken")return _;alert("沒有token，請重新登入"),setTimeout(()=>{router.push("/")},1e3)}return null})(),l=k([]),n=k({}),d=async()=>{const t=await r.get(`${h}/todos`,{headers:{Authorization:u}});l.value=t.data.data};d();const m=(t,o)=>{n.value={...n.value,[o]:t.target.value}},g=t=>{const o=l.value.find(e=>e.id===t);o&&(o.isEditing=!o.isEditing,n.value[t]=o.content)},C=async t=>{const o=l.value.find(e=>e.id===t);o.content=n.value[t],await r.put(`${h}/todos/${t}`,o,{headers:{Authorization:u}}),o.isEditing=!1,d(),n.value={...n.value,[t]:""}},y=async t=>{confirm("確定要刪除嗎？")==!0&&(await r.delete(`${h}/todos/${t}`,{headers:{Authorization:u}}),d())},f=async t=>{await r.patch(`${h}/todos/${t}/toggle`,{},{headers:{Authorization:u}}),d()};return(t,o)=>l.value.length===0?(i(),c("div",A,"目前尚無待辦事項")):(i(),c("ul",w,[(i(!0),c(b,null,x(l.value,(e,_)=>(i(),c("li",{key:_},[e.status===!0?(i(),c("label",z,[a("div",B,[p(a("input",{class:"todoList_input",type:"checkbox","onUpdate:modelValue":s=>e.status=s,onClick:s=>f(e.id)},null,8,F),[[$,e.status]]),T(" "+E(e.content),1)]),a("div",L,[e.isEditing?(i(),c("div",U,[p(a("input",{type:"text","onUpdate:modelValue":s=>n.value[e.id]=s,onChange:s=>m(s,e.id)},null,40,D),[[V,n.value[e.id]]]),a("button",{type:"button",onClick:s=>C(e.id)},"確定",8,N)])):v("",!0),a("button",{type:"button",onClick:s=>g(e.id)},"編輯",8,M),a("button",{type:"button",onClick:s=>y(e.id)},"刪除",8,S)])])):v("",!0)]))),128))]))}};export{H as default};
