import{r as k,o as i,c,F as b,q as x,g as r,a,b as p,s as $,h as T,t as E,v as V,d as v}from"./index-DnRYwDh1.js";const A={key:0,class:"no-item"},w={key:1,class:"todoList_item"},U={key:0,class:"todoList_label"},z={class:"items"},B=["onUpdate:modelValue","onClick"],D={class:"btns"},F={key:0},L=["onUpdate:modelValue","onChange"],N=["onClick"],M=["onClick"],S=["onClick"],h="https://todolist-api.hexschool.io",H={__name:"UnDone",setup(q){const u=(()=>{const t=document.cookie.split(";");for(let o of t){const[e,_]=o.trim().split("=");if(e==="loginToken")return _;alert("沒有token，請重新登入"),setTimeout(()=>{router.push("/")},1e3)}return null})(),l=k([]),n=k({}),d=async()=>{const t=await r.get(`${h}/todos`,{headers:{Authorization:u}});l.value=t.data.data};d();const m=(t,o)=>{n.value={...n.value,[o]:t.target.value}},g=t=>{const o=l.value.find(e=>e.id===t);o&&(o.isEditing=!o.isEditing,n.value[t]=o.content)},f=async t=>{const o=l.value.find(e=>e.id===t);o.content=n.value[t],await r.put(`${h}/todos/${t}`,o,{headers:{Authorization:u}}),o.isEditing=!1,d(),n.value={...n.value,[t]:""}},y=async t=>{confirm("確定要刪除嗎？")==!0&&(await r.delete(`${h}/todos/${t}`,{headers:{Authorization:u}}),d())},C=async t=>{await r.patch(`${h}/todos/${t}/toggle`,{},{headers:{Authorization:u}}),d()};return(t,o)=>l.value.length===0?(i(),c("div",A,"目前尚無待辦事項")):(i(),c("ul",w,[(i(!0),c(b,null,x(l.value,(e,_)=>(i(),c("li",{key:_},[e.status===!1?(i(),c("label",U,[a("div",z,[p(a("input",{class:"todoList_input",type:"checkbox","onUpdate:modelValue":s=>e.status=s,onClick:s=>C(e.id)},null,8,B),[[$,e.status]]),T(" "+E(e.content),1)]),a("div",D,[e.isEditing?(i(),c("div",F,[p(a("input",{type:"text","onUpdate:modelValue":s=>n.value[e.id]=s,onChange:s=>m(s,e.id)},null,40,L),[[V,n.value[e.id]]]),a("button",{type:"button",onClick:s=>f(e.id)},"確定",8,N)])):v("",!0),a("button",{type:"button",onClick:s=>g(e.id)},"編輯",8,M),a("button",{type:"button",onClick:s=>y(e.id)},"刪除",8,S)])])):v("",!0)]))),128))]))}};export{H as default};
