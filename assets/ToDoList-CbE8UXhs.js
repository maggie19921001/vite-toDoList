import{_ as V,g as z,r as g,c as p,a as t,t as m,u as D,w as k,v as y,F as I,h as S,o as v,i as B,e as N,j as U,p as F,f as O}from"./index-Cv6OoiFa.js";import{a as l}from"./axios-C8DqakIB.js";const r=_=>(F("data-v-737aced0"),_=_(),O(),_),M={id:"todoListPage",class:"bg-half"},P=r(()=>t("h1",null,"ONLINE TODO LIST",-1)),j=r(()=>t("li",{class:"todo_sm"},[t("a",{href:"#"},[t("span",null,"王小明的代辦")])],-1)),R={class:"container todoListPage vhContainer"},q={class:"todoList_Content"},G={class:"inputBox"},H={class:"todoList_list"},J=r(()=>t("ul",{class:"todoList_tab"},[t("li",null,[t("a",{href:"#",class:"active"},"全部")]),t("li",null,[t("a",{href:"#"},"待完成")]),t("li",null,[t("a",{href:"#"},"已完成")])],-1)),K={class:"todoList_items"},Q={class:"todoList_item"},W={class:"todoList_label"},X=["onUpdate:modelValue","onClick"],Y={key:0},Z=["onUpdate:modelValue","onChange"],tt=["onClick"],ot=["onClick"],et=["onClick"],st=r(()=>t("a",{href:"#"},[t("i",{class:"fa fa-times"})],-1)),nt=r(()=>t("div",{class:"todoList_statistics"},[t("p",null," 5 個已完成項目")],-1)),c="https://todolist-api.hexschool.io",at={__name:"ToDoList",setup(_){const i=(()=>{const o=document.cookie.split(";");for(let s of o){const[e,f]=s.trim().split("=");if(e==="loginToken")return f}return null})(),x=z(),L=async()=>{try{const o=await l.post(`${c}/users/sign_out`,{},{headers:{Authorization:i}});x.push("/login")}catch(o){console.log(o.message)}},h=g([]),d=g(""),C={content:""},a=g({}),u=async()=>{const o=await l.get(`${c}/todos`,{headers:{Authorization:i}});console.log(o.data),h.value=o.data.data};u();const T=async()=>{d!=null&&(C.content=d.value),await l.post(`${c}/todos`,C,{headers:{Authorization:i}}),d.value="",u()},b=(o,s)=>{a.value={...a.value,[s]:o.target.value}},$=o=>{const s=h.value.find(e=>e.id===o);s&&(s.isEditing=!s.isEditing,a.value[o]=s.content)},w=async o=>{const s=h.value.find(e=>e.id===o);s.content=a.value[o],await l.put(`${c}/todos/${o}`,s,{headers:{Authorization:i}}),s.isEditing=!1,u(),a.value={...a.value,[o]:""}},A=async o=>{confirm("確定要刪除嗎？")==!0&&(await l.delete(`${c}/todos/${o}`,{headers:{Authorization:i}}),u())},E=async o=>{await l.patch(`${c}/todos/${o}/toggle`,{},{headers:{Authorization:i}}),u()};return(o,s)=>(v(),p("div",M,[t("p",null,"Token: "+m(D(i)),1),t("nav",null,[P,t("ul",null,[j,t("li",null,[t("a",{href:"#",onClick:L},"登出")])])]),t("div",R,[t("div",q,[t("div",G,[k(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e)},null,512),[[y,d.value]]),t("button",{onClick:T,class:"fa fa-plus"},"＋")]),t("div",H,[J,t("div",K,[t("ul",Q,[(v(!0),p(I,null,S(h.value,(e,f)=>(v(),p("li",{key:f},[t("label",W,[k(t("input",{class:"todoList_input",type:"checkbox","onUpdate:modelValue":n=>e.status=n,onClick:n=>E(e.id)},null,8,X),[[B,e.status]]),N(" "+m(e.content)+" "+m(e.status?"完成":"未完成")+" ",1),e.isEditing?(v(),p("div",Y,[k(t("input",{type:"text","onUpdate:modelValue":n=>a.value[e.id]=n,onChange:n=>b(n,e.id)},null,40,Z),[[y,a.value[e.id]]]),t("button",{type:"button",onClick:n=>w(e.id)},"確定",8,tt)])):U("",!0),t("button",{type:"button",onClick:n=>$(e.id)},"編輯",8,ot),t("button",{type:"button",onClick:n=>A(e.id)},"刪除",8,et)]),st]))),128))]),nt])])])])]))}},dt=V(at,[["__scopeId","data-v-737aced0"]]);export{dt as default};
